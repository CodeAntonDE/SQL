 # 1)  каком порядке выполняется запрос и кратко охарактеризуй каждый оператор: 


 ![image](https://github.com/user-attachments/assets/9dd7e0aa-a242-431e-954c-c7133ad1bac4)

Порядок выполнения запроса и характеристика операторов:

FROM и INNER JOIN
Объединяются таблицы Table_1 (как t1) и Table_2 (как t2) по совпадению id. Создается декартово произведение строк, удовлетворяющих условию t1.id = t2.id.

WHERE
Фильтрация объединенных строк: остаются только строки, где t1.col_1 > 2. Условие 1 = 1 игнорируется (всегда истинно).

GROUP BY
Группировка оставшихся строк по значению t1.col_1. Все строки с одинаковым col_1 объединяются в одну группу.

HAVING
Фильтрация групп: остаются группы, где количество строк в группе (COUNT(*)) больше 1.

SELECT
Выборка:

t1.col_2 (значение из группы, если допустимо в контексте GROUP BY),
COUNT(*) (количество строк в группе),
COUNT(*) OVER() (общее количество групп после HAVING).
QUALIFY
Фильтрация строк по результату оконной функции: остаются строки, если общее количество групп (COUNT(*) OVER()) больше 1. Если групп меньше 2, результат пуст.

ORDER BY
Сортировка результата по второму столбцу (COUNT(*)), т.е. по размеру группы (по возрастанию).

LIMIT
Возврат только первой строки из отсортированного результата.

Особенности:

Оконная функция COUNT(*) OVER() в SELECT вычисляет общее количество групп после HAVING.
QUALIFY не является частью стандартного SQL и поддерживается в некоторых СУБД (например, BigQuery).
Использование t1.col_2 в SELECT при группировке по t1.col_1 может вызвать ошибку, если col_2 не зависит от col_1 (зависит от диалекта SQL).
Если после HAVING остается 1 группа, QUALIFY исключит все строки, и результат будет пустым.
***************************************************************************************************************************************************************
# 2) Какие виды команд ты знаешь? Назови примеры команд каждого вида и их задачу.

-  **DDL** (Data Definition Language) – Язык определения данных
Управление структурой объектов базы данных (таблицы, индексы, схемы).

CREATE
Пример: CREATE TABLE Users (id INT, name VARCHAR(50));
Задача: Создает новую таблицу, индекс, базу данных.
ALTER
Пример: ALTER TABLE Users ADD COLUMN email VARCHAR(100);
Задача: Изменяет структуру существующего объекта (добавляет/удаляет столбцы).
DROP
Пример: DROP TABLE Users;
Задача: Удаляет объект из базы данных.
TRUNCATE
Пример: TRUNCATE TABLE Users;
Задача: Быстро удаляет все данные из таблицы, сохраняя её структуру.


- **DML** (Data Manipulation Language) – Язык управления данными
Работа с данными внутри таблиц (добавление, изменение, удаление).

INSERT
Пример: INSERT INTO Users (id, name) VALUES (1, 'Alice');
Задача: Добавляет новые записи в таблицу.
UPDATE
Пример: UPDATE Users SET name = 'Bob' WHERE id = 1;
Задача: Изменяет существующие данные.
DELETE
Пример: DELETE FROM Users WHERE id = 1;
Задача: Удаляет записи из таблицы.
MERGE
Пример: MERGE INTO Users USING Updates ON ... WHEN MATCHED THEN UPDATE ...
Задача: Объединяет данные (вставка/обновление/удаление в одной операции).

-  **DQL** (Data Query Language) – Язык запросов данных
Получение данных из базы.

SELECT
Пример: SELECT * FROM Users WHERE age > 18;
Задача: Извлекает данные из таблиц с возможностью фильтрации, сортировки, группировки.


-  **DCL** (Data Control Language) – Язык управления доступом
Управление правами пользователей.

GRANT
Пример: GRANT SELECT ON Users TO user1;
Задача: Дает права на выполнение операций с объектами БД.
REVOKE
Пример: REVOKE DELETE ON Users FROM user1;
Задача: Отзывает ранее выданные права.

-  **TCL** (Transaction Control Language) – Язык управления транзакциями
Управление транзакциями для обеспечения целостности данных.

COMMIT
Пример: COMMIT;
Задача: Фиксирует изменения, сделанные в транзакции.
ROLLBACK
Пример: ROLLBACK;
Задача: Отменяет изменения в транзакции.
SAVEPOINT
Пример: SAVEPOINT sp1;
Задача: Создает точку отката внутри транзакции.
***************************************************************************************************************************************************************
# 3) Отличия между DROP, DELETE и TRUNCATE в SQL:

1. Тип операции
DROP
DDL-команда (Data Definition Language). Удаляет всю таблицу или объект БД (структуру, данные, индексы, триггеры).
Пример:

DROP TABLE employees; -- Таблица "employees" полностью удаляется из БД.
DELETE
DML-команда (Data Manipulation Language). Удаляет строки из таблицы (только данные).
Пример:

DELETE FROM employees WHERE department = 'HR'; -- Удаляет строки, где department = 'HR'.
TRUNCATE
DDL-команда (в большинстве СУБД). Удаляет все строки из таблицы, сохраняя её структуру.

Пример:
TRUNCATE TABLE employees; -- Таблица остается, но все данные удаляются.

2. Что происходит с данными и структурой?
DROP
Удаляет таблицу полностью, включая метаданные (схему, индексы, права доступа). После DROP таблицу нельзя восстановить без бэкапа.

DELETE
Удаляет только конкретные строки (можно задать условие WHERE). Структура таблицы, индексы, автоинкрементные счетчики сохраняются.

TRUNCATE
Удаляет все строки (нет возможности использовать WHERE). Структура таблицы сохраняется, но автоинкрементные счетчики сбрасываются (например, в MySQL).

3. Транзакции и откат
DELETE
Можно откатить с помощью ROLLBACK (если выполнен внутри транзакции).

Пример:
BEGIN TRANSACTION;
DELETE FROM employees;
ROLLBACK; -- Данные восстановятся.
TRUNCATE
В большинстве СУБД (например, PostgreSQL, SQL Server) можно откатить, если выполнен внутри транзакции. В Oracle требует явного COMMIT.
Пример:

BEGIN TRANSACTION;
TRUNCATE TABLE employees;
ROLLBACK; -- Данные восстановятся (зависит от СУБД).
DROP
Требует COMMIT в СУБД с поддержкой DDL-транзакций (например, Oracle). В других СУБД (MySQL) выполняется немедленно и не откатывается.

4. Производительность
TRUNCATE
Быстрее DELETE, так как не логирует удаление каждой строки (минимум операций в журнале транзакций).
DELETE
Медленнее, особенно для больших таблиц, так как удаляет строки по одной и пишет в лог.
DROP
Самая быстрая операция, но необратимая (удаляет всё).
5. Триггеры
DELETE
Вызывает триггеры на удаление (например, BEFORE DELETE, AFTER DELETE).
TRUNCATE
Не вызывает триггеры, так как операция не считается пошаговым удалением строк.
DROP
Триггеры не вызываются, так как таблица удаляется целиком.
6. Освобождение места
TRUNCATE
Освобождает место на диске (если СУБД поддерживает).
DELETE
Не освобождает место — помечает строки как удаленные, но пространство остается занятым.
DROP
Полностью освобождает место, занятое таблицей.
Когда использовать?
DELETE — для удаления части данных с условием WHERE.
TRUNCATE — для быстрого удаления всех данных из таблицы.
DROP — для полного удаления таблицы (например, при пересоздании структуры).
⚠️ Важно:

TRUNCATE и DROP требуют прав администратора в большинстве СУБД.
Все три команды необратимы без бэкапа!
***************************************************************************************************************************************************************
# 4)
***************************************************************************************************************************************************************
# 5)
***************************************************************************************************************************************************************
# 6)
***************************************************************************************************************************************************************
# 7)
***************************************************************************************************************************************************************
# 8)
***************************************************************************************************************************************************************
# 9)
***************************************************************************************************************************************************************
# 10)
***************************************************************************************************************************************************************
# 11)
***************************************************************************************************************************************************************
